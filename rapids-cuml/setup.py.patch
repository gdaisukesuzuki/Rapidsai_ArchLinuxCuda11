*** cuml/python/setup.py-dist	2020-09-15 08:18:18.455898519 +0900
--- cuml/python/setup.py	2020-09-15 08:25:41.099376136 +0900
***************
*** 141,147 ****
  
      def initialize_options(self):
  
!         self.singlegpu = False
          super().initialize_options()
  
      def finalize_options(self):
--- 141,147 ----
  
      def initialize_options(self):
  
!         self.singlegpu = True
          super().initialize_options()
  
      def finalize_options(self):
***************
*** 151,157 ****
          # object has all the args used by the user, we can check that.
          self.singlegpu = '--singlegpu' in self.distribution.script_args
  
!         libs = ['cuda', 'cuml++', 'rmm']
  
          include_dirs = [
              '../cpp/src',
--- 151,157 ----
          # object has all the args used by the user, we can check that.
          self.singlegpu = '--singlegpu' in self.distribution.script_args
  
!         libs = ['cuda', 'cuml++', 'rmm', 'cudart', 'fmt']
  
          include_dirs = [
              '../cpp/src',
***************
*** 168,174 ****
          python_exc_list = []
  
          if (self.singlegpu):
!             python_exc_list = ["*.dask", "*.dask.*"]
          else:
              libs.append('cumlprims')
              libs.append('cumlcomms')
--- 168,174 ----
          python_exc_list = []
  
          if (self.singlegpu):
!             python_exc_list = ["*.dask", "*.dask.*",  "*.*.dask", "*.*.dask.*", "*.dask.*.*","*.*.dask.*.*"]
          else:
              libs.append('cumlprims')
              libs.append('cumlcomms')
***************
*** 211,217 ****
  
      def initialize_options(self):
  
!         self.singlegpu = None
  
          super().initialize_options()
  
--- 211,217 ----
  
      def initialize_options(self):
  
!         self.singlegpu = True
  
          super().initialize_options()
  
***************
*** 230,235 ****
--- 230,238 ----
              cython_exc_list = cython_exc_list + glob.glob('cuml/*/*_mg.pxd')
              cython_exc_list.append('cuml/nccl/nccl.pyx')
              cython_exc_list.append('cuml/dask/common/comms_utils.pyx')
+             cython_exc_list.append('cuml/raft/dask/common/comms_utils.pyx')
+             cython_exc_list.append('cuml/raft/dask/common/nccl.pyx')
+ 
  
              print('--singlegpu: excluding the following Cython components:')
              pprint(cython_exc_list)
